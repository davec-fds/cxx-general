# Imports from caller.
Import('*')

# Include the parent directory.
env.Append(CPPPATH = ['..'])

# Create program-specific environments.
env_ArbInt = env.Copy()
for incdir in cArbInt['include'] : env_ArbInt.Append(CPPPATH    = ['#' + incdir])
for define in cArbInt['defines'] : env_ArbInt.Append(CPPDEFINES = [define]      )
env_Arb = env.Copy()
for incdir in cArb['include'] : env_Arb.Append(CPPPATH    = ['#' + incdir])
for define in cArb['defines'] : env_Arb.Append(CPPDEFINES = [define]      )
env_Timestamp = env.Copy()
for incdir in cTimestamp['include'] : env_Timestamp.Append(CPPPATH    = ['#' + incdir])
for define in cTimestamp['defines'] : env_Timestamp.Append(CPPDEFINES = [define]      )
env_INIFile = env.Copy()
for incdir in cINIFile['include'] : env_INIFile.Append(CPPPATH    = ['#' + incdir])
for define in cINIFile['defines'] : env_INIFile.Append(CPPDEFINES = [define]      )

# Object files.
o_SafeInt   = env          .Object(target = 'SafeInt'  , source = ['SafeInt.c++'  ])
o_ArbInt    = env_ArbInt   .Object(target = 'ArbInt'   , source = ['ArbInt.c++'   ])
o_Arb       = env_Arb      .Object(target = 'Arb'      , source = ['Arb.c++'      ])
o_Timestamp = env_Timestamp.Object(target = 'Timestamp', source = ['Timestamp.c++'])
o_INIFile   = env_INIFile  .Object(target = 'INIFile'  , source = ['INIFile.c++'  ])

# Programs.
env          .Program(target = 'SafeInt'  , source =                           [o_SafeInt  ])
env_ArbInt   .Program(target = 'ArbInt'   , source = list(cArbInt   ['obj']) + [o_ArbInt   ])
env_Arb      .Program(target = 'Arb'      , source = list(cArb      ['obj']) + [o_Arb      ])
env_Timestamp.Program(target = 'Timestamp', source = list(cTimestamp['obj']) + [o_Timestamp])
env_INIFile  .Program(target = 'INIFile'  , source = list(cINIFile  ['obj']) + [o_INIFile  ])
